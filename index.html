<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>èµ›åšå°‘å¥³åŸºå› é‡ç»„å®éªŒå®¤ | Cyber-Gen</title>
    <style>
        :root {
            --pink: #ff007f;
            --blue: #00f3ff;
            --green: #39ff14;
            --purple: #bc13fe;
            --glass: rgba(255, 255, 255, 0.08);
        }

        body, html {
            margin: 0; padding: 0; min-height: 100%; width: 100%;
            background: #050505; color: #fff;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            overflow-x: hidden; /* å…è®¸çºµå‘æ»šåŠ¨ */
        }

        .nebula {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(188, 19, 254, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 243, 255, 0.15) 0%, transparent 50%);
            z-index: -2;
            animation: backgroundFlow 10s ease-in-out infinite alternate;
        }
        @keyframes backgroundFlow { 0% { transform: scale(1) rotate(0deg); } 100% { transform: scale(1.1) rotate(2deg); } }

        .grid-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(rgba(0, 243, 255, 0.05) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(0, 243, 255, 0.05) 1px, transparent 1px);
            background-size: 30px 30px;
            z-index: -1;
        }

        .flash-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; opacity: 0; z-index: 5000; pointer-events: none;
        }
        .flash-active { animation: flashAnim 0.4s ease-out; }
        @keyframes flashAnim { 0% { opacity: 0.8; } 100% { opacity: 0; } }

        header {
            height: 50px; display: flex; align-items: center; justify-content: center;
            border-bottom: 2px solid var(--blue); background: rgba(0,0,0,0.8); backdrop-filter: blur(10px);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.3); letter-spacing: 2px; font-weight: bold; font-size: 1rem;
            position: sticky; top: 0; z-index: 2000;
        }

        /* ç§»åŠ¨ç«¯ä¸»å®¹å™¨æ”¹ä¸ºå‚ç›´åˆ— */
        .container { 
            display: flex; 
            flex-direction: column; 
            padding: 15px; 
            gap: 20px; 
            box-sizing: border-box; 
            align-items: center;
        }

        /* åŸºå› ä»“åº“ï¼šæ”¹ä¸ºæ¨ªå‘æ»šåŠ¨æˆ–ç´§å‡‘ç½‘æ ¼ */
        .sidebar {
            width: 100%; background: var(--glass); border: 1px solid var(--pink); border-radius: 10px;
            padding: 12px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; box-sizing: border-box;
        }
        .sidebar h3 { grid-column: span 4; font-size: 12px; color: var(--pink); margin: 0 0 5px 0; text-align: center; }

        .element {
            background: rgba(255, 255, 255, 0.05); border: 1px solid #444; padding: 8px 2px;
            border-radius: 8px; text-align: center; cursor: pointer; transition: 0.2s;
            -webkit-user-select: none;
        }
        .element:active { transform: scale(0.9); border-color: var(--blue); }
        .element-icon { font-size: 24px; display: block; }
        .element-name { font-size: 9px; color: #ddd; white-space: nowrap; }

        /* æ ¸å¿ƒåŒº */
        .main-view { width: 100%; position: relative; display: flex; flex-direction: column; align-items: center; }
        
        .core-pod {
            width: 180px; height: 180px; border: 4px solid var(--blue); border-radius: 50%;
            position: relative; background: radial-gradient(circle at center, rgba(0, 243, 255, 0.1) 0%, transparent 80%);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2); display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 0.3s;
        }
        .core-pod.active { box-shadow: 0 0 40px var(--pink); border-color: var(--pink); transform: scale(1.05); }
        
        #mix-num { font-size: 48px; font-weight: 900; text-shadow: 0 0 15px var(--blue); }

        .btn-synth {
            margin-top: 20px; width: 80%; padding: 12px 0; font-size: 18px; background: transparent;
            border: 2px solid var(--green); color: var(--green); cursor: pointer; font-weight: bold; letter-spacing: 5px;
            border-radius: 30px; transition: 0.3s;
        }
        .btn-synth:active { background: var(--green); color: #000; }

        /* ç…§ç‰‡æ•ˆæœé€‚é… */
        .photo-frame {
            position: fixed; width: 85%; max-width: 320px; background: #fff; padding: 10px; box-shadow: 0 0 40px rgba(0,0,0,0.8);
            z-index: 3000; touch-action: none;
            left: 50%; top: 50%; transform: translate(-50%, -50%) rotate(var(--rot));
            animation: photoIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        @keyframes photoIn { 0% { transform: translate(-50%, -50%) scale(0) rotate(-20deg); opacity: 0; } 100% { opacity: 1; } }
        
        .photo-frame img { width: 100%; display: block; pointer-events: none; }
        .scanner { position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: var(--green); box-shadow: 0 0 10px var(--green); animation: scanMove 2s linear infinite; }
        @keyframes scanMove { 0% { top: 0; } 100% { top: 100%; } }

        /* è£…é¥°æ ï¼šæ”¹ä¸ºæ¨ªå‘æ’åˆ— */
        .decor-bar { 
            width: 100%; background: var(--glass); border-top: 1px solid var(--green); 
            padding: 10px; display: flex; justify-content: space-around; align-items: center;
            box-sizing: border-box;
        }
        .decor-btn { font-size: 24px; cursor: pointer; padding: 5px; border-radius: 5px; background: rgba(255,255,255,0.05); }
        
        .sticker { position: absolute; font-size: 40px; pointer-events: none; z-index: 3100; }

        .hint-text { margin: 10px 0 60px 0; color: #666; font-size: 10px; text-align: center; }
        
        #status { margin-top:10px; color: var(--pink); font-size: 11px; min-height: 15px; }
    </style>
</head>
<body>

<div class="flash-overlay" id="flash"></div>
<div class="nebula"></div>
<div class="grid-bg"></div>

<header>èµ›åšå°‘å¥³å®éªŒå®¤ V5.2</header>

<div class="container">
    <div class="sidebar">
        <h3>ç‚¹å‡»æˆ–æ‹–æ‹½æ³¨å…¥åŸºå› ï¼š</h3>
        <div class="element" draggable="true" ondragstart="drag(event)" onclick="addGene()" data-id="1"><span class="element-icon">ğŸ¼</span><span class="element-name">å¹¼å´½</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" onclick="addGene()" data-id="2"><span class="element-icon">ğŸŒ¶ï¸</span><span class="element-name">è¾›è¾£</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" onclick="addGene()" data-id="3"><span class="element-icon">ğŸ§ª</span><span class="element-name">ç§‘ç ”</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" onclick="addGene()" data-id="4"><span class="element-icon">ğŸ¥”</span><span class="element-name">ç¢³æ°´</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" onclick="addGene()" data-id="5"><span class="element-icon">ğŸŒ™</span><span class="element-name">ç†¬å¤œ</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" onclick="addGene()" data-id="6"><span class="element-icon">ğŸŸ</span><span class="element-name">é”¦é²¤</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" onclick="addGene()" data-id="7"><span class="element-icon">âš¡</span><span class="element-name">è¶…é¢‘</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" onclick="addGene()" data-id="8"><span class="element-icon">ğŸ¤¡</span><span class="element-name">ä¹å­</span></div>
    </div>

    <div class="main-view">
        <div class="core-pod" id="pod" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div id="mix-num">0</div>
            <div style="font-size: 10px; color: var(--blue); font-weight: bold;">å·²è½½å…¥åºåˆ—</div>
        </div>
        <button class="btn-synth" onclick="synthesize()">å¼€å§‹ç”Ÿæˆ</button>
        <div id="status">ç³»ç»Ÿå¾…æœºä¸­...</div>
    </div>

    <div class="decor-bar">
        <div class="decor-btn" onclick="applyDecor('ğŸ•¶ï¸')">ğŸ•¶ï¸</div>
        <div class="decor-btn" onclick="applyDecor('ğŸ’¢')">ğŸ’¢</div>
        <div class="decor-btn" onclick="applyDecor('ğŸ·')">ğŸ·</div>
        <div class="decor-btn" onclick="applyDecor('ğŸ”¥')">ğŸ”¥</div>
        <div class="decor-btn" onclick="applyDecor('ğŸ’–')">ğŸ’–</div>
        <div class="decor-btn" onclick="location.reload()" style="font-size: 12px; color: #666;">REBOOT</div>
    </div>

    <div class="hint-text">ç…§ç‰‡ç”Ÿæˆåå¯å•æŒ‡æ‹–åŠ¨ï¼Œç‚¹å‡»è£…é¥°æŒ‰é’®æ·»åŠ è´´çº¸ã€‚</div>
</div>

<script>
    let mixCount = 0;
    let currentPhotoNode = null;

    const reports = [
        "è§‚æµ‹æ—¥å¿—ï¼šè¯¥æ ·æœ¬ç”±äºé•¿æœŸâ€˜ç†¬å¤œâ€™ï¼ŒåŸºå› ä¸­å……æ»¡äº†ç”µå­å±å¹•çš„ä½™æ¸©ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šæ£€æµ‹åˆ°æå¼ºçš„â€˜å¹²é¥­â€™æœ¬èƒ½ï¼Œè¯¥ä¸ªä½“åœ¨ç«é”…é¢å‰ä¼šè‡ªåŠ¨å±è”½é¥±è…¹æ„Ÿã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šçµé­‚æˆåˆ†ä¸­ï¼Œå¥¶èŒ¶å æ¯”é«˜è¾¾ 75.32%ï¼Œæ€¥éœ€æ³¨å…¥çç ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šè­¦å‘Šï¼å‘ç°â€˜æ‹–å»¶ç—‡â€™åŸºå› çªå˜ï¼Œæ ·æœ¬æ­£è¯•å›¾å»¶è¿Ÿé‡ç»„æŒ‡ä»¤ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šè¯¥æ ·æœ¬åœ¨ç©¿ç€ç™½å¤§è¤‚æ—¶ï¼Œæ‘¸é±¼æ¦‚ç‡ä¼šç¬é—´æå‡ 200%ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šé‡ç»„æˆåŠŸï¼æ³¨å…¥â€˜èµ›åšé”¦é²¤â€™æ¨¡ç»„ï¼Œè¯¥æ ·æœ¬ç›®å‰å¤„äºå¥½è¿çˆ†æ£šçŠ¶æ€ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šé€»è¾‘æ ¸å¿ƒå´©æºƒï¼è¯¥æ ·æœ¬åŒæ—¶å…·å¤‡â€˜ç§‘ç ”å‘˜â€™ä¸â€˜æ··æ²Œåƒè´§â€™åŒé‡äººæ ¼ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šè¿™æ˜¯ä¸€ä¸ªè¯•å›¾ç”¨ç§‘å­¦è§£é‡Šâ€˜ä¸ºä»€ä¹ˆåœŸè±†é•¿å¾—åƒå±è‚¡â€™çš„ç”Ÿå‘½ä½“ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šæ— è®ºåŸºå› å¦‚ä½•é‡ç»„ï¼Œä½ æ°¸è¿œæ˜¯å®‡å®™ä¸­ç‹¬ä¸€æ— äºŒçš„æ€ªå¥‡å°‘å¥³ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šæ­£åœ¨é‡ç»„... æ³¨å…¥â€˜å¿«ä¹å› å­â€™æˆåŠŸï¼Œè¯¥æ ·æœ¬å¤„äº 100% äº¢å¥‹çŠ¶æ€ã€‚"
    ];

    function allowDrop(ev) { ev.preventDefault(); }
    function drag(ev) { ev.dataTransfer.setData("text", "added"); }
    function drop(ev) { ev.preventDefault(); addGene(); }

    function addGene() {
        mixCount++;
        document.getElementById('mix-num').innerText = mixCount;
        document.getElementById('pod').classList.add('active');
        setTimeout(() => document.getElementById('pod').classList.remove('active'), 200);
        document.getElementById('status').innerText = "æ£€æµ‹åˆ°åŸºå› æ³¨å…¥...";
    }

    function synthesize() {
        if(mixCount === 0) { 
            document.getElementById('status').innerText = "é”™è¯¯ï¼šè¯·å…ˆæŠ•å…¥åŸºå› æ ·æœ¬ï¼"; 
            return; 
        }

        document.getElementById('flash').classList.add('flash-active');
        setTimeout(() => document.getElementById('flash').classList.remove('flash-active'), 400);

        if(currentPhotoNode) {
            const old = currentPhotoNode;
            old.style.transition = "0.3s";
            old.style.opacity = "0";
            setTimeout(() => old.remove(), 300);
        }

        const randomReport = reports[Math.floor(Math.random() * reports.length)];
        const randomID = Math.floor(Math.random() * 18) + 1;

        document.getElementById('status').innerText = "åŸºå› é“¾é‡ç»„ä¸­...";
        
        setTimeout(() => {
            createPhoto(randomID, randomReport);
            mixCount = 0;
            document.getElementById('mix-num').innerText = "0";
            document.getElementById('status').innerText = "é‡ç»„è§‚æµ‹å·²å®Œæˆ";
        }, 500);
    }

    function createPhoto(id, msg) {
        const frame = document.createElement('div');
        frame.className = 'photo-frame';
        const rotation = (Math.random() - 0.5) * 10;
        frame.style.setProperty('--rot', `${rotation}deg`);

        frame.innerHTML = `
            <div class="scanner"></div>
            <img src="${id}.jpg" alt="Result">
            <div style="color:#000; font-size:11px; margin-top:8px; border-top:1px solid #eee; padding-top:8px; font-weight:bold;">
                <span style="color:var(--pink)">[ è§‚æµ‹è®°å½• ]</span><br>
                > ${msg}
            </div>
        `;

        initTouchDrag(frame);
        document.body.appendChild(frame);
        currentPhotoNode = frame;
    }

    function applyDecor(emoji) {
        if(!currentPhotoNode) {
            document.getElementById('status').innerText = "æç¤ºï¼šå…ˆç”Ÿæˆç…§ç‰‡ï¼";
            return;
        }
        const sticker = document.createElement('div');
        sticker.innerText = emoji; sticker.className = 'sticker';
        sticker.style.left = 10 + Math.random() * 70 + '%';
        sticker.style.top = 10 + Math.random() * 60 + '%';
        currentPhotoNode.appendChild(sticker);
    }

    // ç§»åŠ¨ç«¯è§¦æ‘¸æ‹–æ‹½é€»è¾‘
    function initTouchDrag(el) {
        let offsetX, offsetY;
        
        el.addEventListener('touchstart', (e) => {
            const touch = e.touches[0];
            const rect = el.getBoundingClientRect();
            offsetX = touch.clientX - rect.left;
            offsetY = touch.clientY - rect.top;
            el.style.zIndex = 4000;
        }, {passive: false});

        el.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            el.style.left = (touch.clientX - offsetX + el.offsetWidth/2) + 'px';
            el.style.top = (touch.clientY - offsetY + el.offsetHeight/2) + 'px';
            // ç§»åŠ¨æ—¶ä¿æŒå±…ä¸­ä¿®æ­£
            el.style.transform = `translate(-50%, -50%) rotate(${el.style.getPropertyValue('--rot')})`;
        }, {passive: false});
    }
</script>
</body>
</html>
